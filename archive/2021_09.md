# 2021.09 - Substrate 技术更新速递

## 重要提交和发布

* [jsonrpsee proc macros #9673](https://github.com/paritytech/substrate/pull/9673) - 替换掉jsonrpc-core-client，所有模块统一使用了jsonrpsee

* [Add methods param for RPC state_traceBlock #9642](https://github.com/paritytech/substrate/pull/9642) - 增加了state_traceBlock方法参数，可以在特定区块获取storage的改变

* [Add VoteLocking config #9641](https://github.com/paritytech/substrate/pull/9641) - 在POS区块链中使用EnactmentPeriod来作投票抵押，但其他共识中需要的更多投票机制，增加了一个VoteLockingPeriod来配置标准的投票

* [rpc-api: use thiserror instead of derive_more for error handling #9631](https://github.com/paritytech/substrate/pull/9631) - 用thiserror替换derive_more来作错误处理

* [Expose storage_prefix logic, and remove duplicate code #9621](https://github.com/paritytech/substrate/pull/9621) - 使用storage_prefix替换掉一些冗余代码

* [Fetch runtime code from storage cache when using proofing backend #9611](https://github.com/paritytech/substrate/pull/9611) - 从TrieBackend获取runtime code 会导致性能问题，修改成从缓存中读取



## 设计方案和问题讨论

* [WIP: Removal of light client from substrate #9684](https://github.com/paritytech/substrate/pull/9684) - 在substrate代码中移除了轻客户端

* [Automatic pallet parts in construct_runtime](https://github.com/paritytech/substrate/pull/9681) - 自动装填construct_runtime的pallet, 使代码更简洁. 把曾经的`System: frame_system::{Pallet, Call, Config, Storage, Event<T>}` 简化成 `System: frame_system`

* [contracts: Remove state rent #9669](https://github.com/paritytech/substrate/pull/9669) - 去掉state rent会减少复杂度，aten则建议恢复 [put_code](https://github.com/paritytech/substrate/issues/8671)

* [Recursive election provider as fallback #9648](https://github.com/paritytech/substrate/pull/9648) - 

* []() - 
* []() - 

## 文档和资料

* [subkey doc](https://github.com/paritytech/substrate/blob/c64bb7d17796631983160b6cfc136306dc246e3d/bin/utils/subkey/README.md) - 增加了subkey文档


## 技术生态和社区



## 跨链协议

* [XCM v1 version notification stub #3766](https://github.com/paritytech/polkadot/pull/3766) - Gav实现了SubscribeVersion/UnsubscribeVersion从xcmv1到v2升级的通知

* [XCM: Automatic Version Negotiation #3736](https://github.com/paritytech/polkadot/pull/3736) - Gav加入WrapVersion来做XCM版本协商，引入了QueryResponse处理返回，加入了VersionChangeNotifier接口

* [XCM: Allow reclaim of assets dropped from holding #3727](https://github.com/paritytech/polkadot/pull/3727) - 加入了ClaimAsset去挽救跨链中丢失的资产

* [XCM: Introduce versioning to dispatchables' params #3693](https://github.com/paritytech/polkadot/pull/3693) - XCM中加入version参数